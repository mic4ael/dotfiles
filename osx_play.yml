- hosts: 127.0.0.1
  tasks:
    - name: Load OSX packages to a variable
      include_vars: file={{ playbook_dir }}/OSX/brew_packages.yml name=packages

    - name: Installing OSX packages
      homebrew: name={{ item }} state=present
      with_items: "{{ packages.brew_packages }}"

    - name: Installing OSX casks
      homebrew_cask: name={{ item }} state=present
      with_items: "{{ packages.cask_packages }}"

    - name: Cleanup after installing OSX packages
      shell: |
        brew linkapps;
        brew cleanup;
        brew cask cleanup;
